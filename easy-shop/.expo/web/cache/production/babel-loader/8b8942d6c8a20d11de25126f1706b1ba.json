{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from\"react\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{Picker}from\"native-base\";import Icon from\"@expo/vector-icons/FontAwesome\";import TrafficLight from\"./StyledComponents/TrafficLight\";import EasyButton from\"./StyledComponents/EasyButton\";import Toast from\"react-native-toast-message\";import AsyncStorage from\"@react-native-community/async-storage\";import axios from\"axios\";import baseURL from\"../assets/common/baseUrl\";var codes=[{name:\"pending\",code:\"3\"},{name:\"shipped\",code:\"2\"},{name:\"delivered\",code:\"1\"}];var OrderCard=function OrderCard(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),orderStatus=_useState2[0],setOrderStatus=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),statusText=_useState4[0],setStatusText=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),statusChange=_useState6[0],setStatusChange=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),token=_useState8[0],setToken=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),cardColor=_useState10[0],setCardColor=_useState10[1];useEffect(function(){if(props.editMode){AsyncStorage.getItem(\"jwt\").then(function(res){setToken(res);}).catch(function(error){return console.log(error);});}if(props.status==\"3\"){setOrderStatus(React.createElement(TrafficLight,{unavailable:true}));setStatusText(\"pending\");setCardColor(\"#E74C3C\");}else if(props.status==\"2\"){setOrderStatus(React.createElement(TrafficLight,{limited:true}));setStatusText(\"shipped\");setCardColor(\"#F1C40F\");}else{setOrderStatus(React.createElement(TrafficLight,{available:true}));setStatusText(\"delivered\");setCardColor(\"#2ECC71\");}return function(){setOrderStatus();setStatusText();setCardColor();};},[]);var updateOrder=function updateOrder(){var config={headers:{Authorization:\"Bearer \"+token}};var order={city:props.city,country:props.country,dateOrdered:props.dateOrdered,id:props.id,orderItems:props.orderItems,phone:props.phone,shippingAddress1:props.shippingAddress1,shippingAddress2:props.shippingAddress2,status:statusChange,totalPrice:props.totalPrice,user:props.user,zip:props.zip};axios.put(baseURL+\"orders/\"+props.id,order,config).then(function(res){if(res.status==200||res.status==201){Toast.show({topOffset:60,type:\"success\",text1:\"Order Edited\",text2:\"\"});setTimeout(function(){props.navigation.navigate(\"Products\");},500);}}).catch(function(error){Toast.show({topOffset:60,type:\"error\",text1:\"Something went wrong\",text2:\"Please try again\"});});};return React.createElement(View,{style:[{backgroundColor:cardColor},styles.container]},React.createElement(View,{style:styles.container},React.createElement(Text,null,\"Order Number: #\",props.id)),React.createElement(View,{style:{marginTop:10}},React.createElement(Text,null,\"Status: \",statusText,\" \",orderStatus),React.createElement(Text,null,\"Address: \",props.shippingAddress1,\" \",props.shippingAddress2),React.createElement(Text,null,\"City: \",props.city),React.createElement(Text,null,\"Country: \",props.country),React.createElement(Text,null,\"Date Ordered: \",props.dateOrdered.split(\"T\")[0]),React.createElement(View,{style:styles.priceContainer},React.createElement(Text,null,\"Price: \"),React.createElement(Text,{style:styles.price},\"$ \",props.totalPrice)),props.editMode?React.createElement(View,null,React.createElement(Picker,{mode:\"dropdown\",iosIcon:React.createElement(Icon,{color:\"#007aff\",name:\"arrow-down\"}),style:{width:undefined},selectedValue:statusChange,placeholder:\"Change Status\",placeholderIconColor:{color:\"#007aff\"},onValueChange:function onValueChange(e){return setStatusChange(e);}},codes.map(function(c){return React.createElement(Picker.Item,{key:c.code,label:c.name,value:c.code});})),React.createElement(EasyButton,{secondary:true,large:true,onPress:function onPress(){return updateOrder();}},React.createElement(Text,{style:{color:\"white\"}},\"Update\"))):null));};var styles=StyleSheet.create({container:{padding:20,margin:10,borderRadius:10},title:{backgroundColor:\"#62B1F6\",padding:5},priceContainer:{marginTop:10,alignSelf:\"flex-end\",flexDirection:\"row\"},price:{color:\"white\",fontWeight:\"bold\"}});export default OrderCard;","map":{"version":3,"names":["React","useEffect","useState","Picker","Icon","TrafficLight","EasyButton","Toast","AsyncStorage","axios","baseURL","codes","name","code","OrderCard","props","orderStatus","setOrderStatus","statusText","setStatusText","statusChange","setStatusChange","token","setToken","cardColor","setCardColor","editMode","getItem","then","res","catch","error","console","log","status","updateOrder","config","headers","Authorization","order","city","country","dateOrdered","id","orderItems","phone","shippingAddress1","shippingAddress2","totalPrice","user","zip","put","show","topOffset","type","text1","text2","setTimeout","navigation","navigate","backgroundColor","styles","container","marginTop","split","priceContainer","price","width","undefined","color","e","map","c","StyleSheet","create","padding","margin","borderRadius","title","alignSelf","flexDirection","fontWeight"],"sources":["D:/PTIT/do an nam 4/mobile/mern-stack-ecommerce-master/easy-shop/Shared/OrderCard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { View, Text, StyleSheet } from \"react-native\";\nimport { Picker } from \"native-base\";\nimport Icon from \"react-native-vector-icons/FontAwesome\";\nimport TrafficLight from \"./StyledComponents/TrafficLight\";\nimport EasyButton from \"./StyledComponents/EasyButton\";\nimport Toast from \"react-native-toast-message\";\n\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport axios from \"axios\";\nimport baseURL from \"../assets/common/baseUrl\";\n\nconst codes = [\n  { name: \"pending\", code: \"3\" },\n  { name: \"shipped\", code: \"2\" },\n  { name: \"delivered\", code: \"1\" },\n];\n\nconst OrderCard = (props) => {\n  const [orderStatus, setOrderStatus] = useState();\n  const [statusText, setStatusText] = useState();\n  const [statusChange, setStatusChange] = useState();\n  const [token, setToken] = useState();\n  const [cardColor, setCardColor] = useState();\n\n  useEffect(() => {\n    if (props.editMode) {\n      AsyncStorage.getItem(\"jwt\")\n        .then((res) => {\n          setToken(res);\n        })\n        .catch((error) => console.log(error));\n    }\n\n    if (props.status == \"3\") {\n      setOrderStatus(<TrafficLight unavailable></TrafficLight>);\n      setStatusText(\"pending\");\n      setCardColor(\"#E74C3C\");\n    } else if (props.status == \"2\") {\n      setOrderStatus(<TrafficLight limited></TrafficLight>);\n      setStatusText(\"shipped\");\n      setCardColor(\"#F1C40F\");\n    } else {\n      setOrderStatus(<TrafficLight available></TrafficLight>);\n      setStatusText(\"delivered\");\n      setCardColor(\"#2ECC71\");\n    }\n\n    return () => {\n      setOrderStatus();\n      setStatusText();\n      setCardColor();\n    };\n  }, []);\n\n  const updateOrder = () => {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    };\n\n    const order = {\n      city: props.city,\n      country: props.country,\n      dateOrdered: props.dateOrdered,\n      id: props.id,\n      orderItems: props.orderItems,\n      phone: props.phone,\n      shippingAddress1: props.shippingAddress1,\n      shippingAddress2: props.shippingAddress2,\n      status: statusChange,\n      totalPrice: props.totalPrice,\n      user: props.user,\n      zip: props.zip,\n    };\n\n    axios\n      .put(`${baseURL}orders/${props.id}`, order, config)\n      .then((res) => {\n        if (res.status == 200 || res.status == 201) {\n          Toast.show({\n            topOffset: 60,\n            type: \"success\",\n            text1: \"Order Edited\",\n            text2: \"\",\n          });\n          setTimeout(() => {\n            props.navigation.navigate(\"Products\");\n          }, 500);\n        }\n      })\n      .catch((error) => {\n        Toast.show({\n          topOffset: 60,\n          type: \"error\",\n          text1: \"Something went wrong\",\n          text2: \"Please try again\",\n        });\n      });\n  };\n\n  return (\n    <View style={[{ backgroundColor: cardColor }, styles.container]}>\n      <View style={styles.container}>\n        <Text>Order Number: #{props.id}</Text>\n      </View>\n      <View style={{ marginTop: 10 }}>\n        <Text>\n          Status: {statusText} {orderStatus}\n        </Text>\n        <Text>\n          Address: {props.shippingAddress1} {props.shippingAddress2}\n        </Text>\n        <Text>City: {props.city}</Text>\n        <Text>Country: {props.country}</Text>\n        <Text>Date Ordered: {props.dateOrdered.split(\"T\")[0]}</Text>\n        <View style={styles.priceContainer}>\n          <Text>Price: </Text>\n          <Text style={styles.price}>$ {props.totalPrice}</Text>\n        </View>\n        {props.editMode ? (\n          <View>\n            <Picker\n              mode=\"dropdown\"\n              iosIcon={<Icon color={\"#007aff\"} name=\"arrow-down\" />}\n              style={{ width: undefined }}\n              selectedValue={statusChange}\n              placeholder=\"Change Status\"\n              placeholderIconColor={{ color: \"#007aff\" }}\n              onValueChange={(e) => setStatusChange(e)}\n            >\n              {codes.map((c) => {\n                return (\n                  <Picker.Item key={c.code} label={c.name} value={c.code} />\n                );\n              })}\n            </Picker>\n            <EasyButton secondary large onPress={() => updateOrder()}>\n              <Text style={{ color: \"white\" }}>Update</Text>\n            </EasyButton>\n          </View>\n        ) : null}\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 20,\n    margin: 10,\n    borderRadius: 10,\n  },\n  title: {\n    backgroundColor: \"#62B1F6\",\n    padding: 5,\n  },\n  priceContainer: {\n    marginTop: 10,\n    alignSelf: \"flex-end\",\n    flexDirection: \"row\",\n  },\n  price: {\n    color: \"white\",\n    fontWeight: \"bold\",\n  },\n});\n\nexport default OrderCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}