{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from\"react\";import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Button from\"react-native-web/dist/exports/Button\";import{Text,Left,Right,ListItem,Thumbnail,Body}from\"native-base\";import{connect}from\"react-redux\";import*as actions from\"../../../Redux/Actions/cartActions\";import Toast from\"react-native-toast-message\";import axios from\"axios\";import baseURL from\"../../../assets/common/baseUrl\";var _Dimensions$get=Dimensions.get(\"window\"),width=_Dimensions$get.width,height=_Dimensions$get.height;var Confirm=function Confirm(props){var finalOrder=props.route.params;var _useState=useState(),_useState2=_slicedToArray(_useState,2),productUpdate=_useState2[0],setProductUpdate=_useState2[1];useEffect(function(){if(finalOrder){getProducts(finalOrder);}return function(){setProductUpdate();};},[props]);var getProducts=function getProducts(x){var order=x.order.order;var products=[];if(order){order.orderItems.forEach(function(cart){axios.get(baseURL+\"products/\"+cart.product).then(function(data){products.push(data.data);setProductUpdate(products);}).catch(function(e){console.log(e);});});}};var confirmOrder=function confirmOrder(){var order=finalOrder.order.order;axios.post(baseURL+\"orders\",order).then(function(res){if(res.status==200||res.status==201){Toast.show({topOffset:60,type:\"success\",text1:\"Order Completed\",text2:\"\"});setTimeout(function(){props.clearCart();props.navigation.navigate(\"Cart\");},500);}}).catch(function(error){Toast.show({topOffset:60,type:\"error\",text1:\"Something went wrong\",text2:\"Please try again\"});});};return React.createElement(ScrollView,{contentContainerStyle:styles.container},React.createElement(View,{style:styles.titleContainer},React.createElement(Text,{style:{fontSize:20,fontWeight:\"bold\"}},\"Confirm Order\"),props.route.params?React.createElement(View,{style:{borderWidth:1,borderColor:\"orange\"}},React.createElement(Text,{style:styles.title},\"Shipping to:\"),React.createElement(View,{style:{padding:8}},React.createElement(Text,null,\"Address: \",finalOrder.order.order.shippingAddress1),React.createElement(Text,null,\"Address2: \",finalOrder.order.order.shippingAddress2),React.createElement(Text,null,\"City: \",finalOrder.order.order.city),React.createElement(Text,null,\"Zip Code: \",finalOrder.order.order.zip),React.createElement(Text,null,\"Country: \",finalOrder.order.order.country)),React.createElement(Text,{style:styles.title},\"Items:\"),productUpdate&&React.createElement(React.Fragment,null,productUpdate.map(function(x){return React.createElement(ListItem,{style:styles.listItem,key:x.name,avatar:true},React.createElement(Left,null,React.createElement(Thumbnail,{source:{uri:x.image}})),React.createElement(Body,{style:styles.body},React.createElement(Left,null,React.createElement(Text,null,x.name)),React.createElement(Right,null,React.createElement(Text,null,\"$ \",x.price))));}))):null,React.createElement(View,{style:{alignItems:\"center\",margin:20}},React.createElement(Button,{title:\"Place order\",onPress:confirmOrder}))));};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{clearCart:function clearCart(){return dispatch(actions.clearCart());}};};var styles=StyleSheet.create({container:{height:height,padding:8,alignContent:\"center\",backgroundColor:\"white\"},titleContainer:{justifyContent:\"center\",alignItems:\"center\",margin:8},title:{alignSelf:\"center\",margin:8,fontSize:16,fontWeight:\"bold\"},listItem:{alignItems:\"center\",backgroundColor:\"white\",justifyContent:\"center\",width:width/1.2},body:{margin:10,alignItems:\"center\",flexDirection:\"row\"}});export default connect(null,mapDispatchToProps)(Confirm);","map":{"version":3,"names":["React","useEffect","useState","Text","Left","Right","ListItem","Thumbnail","Body","connect","actions","Toast","axios","baseURL","Dimensions","get","width","height","Confirm","props","finalOrder","route","params","productUpdate","setProductUpdate","getProducts","x","order","products","orderItems","forEach","cart","product","then","data","push","catch","e","console","log","confirmOrder","post","res","status","show","topOffset","type","text1","text2","setTimeout","clearCart","navigation","navigate","error","styles","container","titleContainer","fontSize","fontWeight","borderWidth","borderColor","title","padding","shippingAddress1","shippingAddress2","city","zip","country","map","listItem","name","uri","image","body","price","alignItems","margin","mapDispatchToProps","dispatch","StyleSheet","create","alignContent","backgroundColor","justifyContent","alignSelf","flexDirection"],"sources":["D:/PTIT/do an nam 4/mobile/mern-stack-ecommerce-master/easy-shop/Screens/Cart/Checkout/Confirm.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { View, StyleSheet, Dimensions, ScrollView, Button } from \"react-native\";\nimport { Text, Left, Right, ListItem, Thumbnail, Body } from \"native-base\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../Redux/Actions/cartActions\";\n\nimport Toast from \"react-native-toast-message\";\nimport axios from \"axios\";\nimport baseURL from \"../../../assets/common/baseUrl\";\n\nvar { width, height } = Dimensions.get(\"window\");\n\nconst Confirm = (props) => {\n  const finalOrder = props.route.params;\n\n  // Add this\n  const [productUpdate, setProductUpdate] = useState();\n  useEffect(() => {\n      if(finalOrder) {\n        getProducts(finalOrder);\n      }\n    return () => {\n      setProductUpdate();\n    };\n  }, [props]);\n\n  // Add this\n  const getProducts = (x) => {\n    const order = x.order.order;\n    var products = [];\n    if(order) {\n        order.orderItems.forEach((cart) => {\n            axios\n              .get(`${baseURL}products/${cart.product}`)\n              .then((data) => {\n                products.push(data.data);\n                setProductUpdate(products);\n              })\n              .catch((e) => {\n                console.log(e);\n              });\n          });\n    }\n    \n  };\n\n  const confirmOrder = () => {\n    const order = finalOrder.order.order;\n    axios\n      .post(`${baseURL}orders`, order)\n      .then((res) => {\n        if (res.status == 200 || res.status == 201) {\n          Toast.show({\n            topOffset: 60,\n            type: \"success\",\n            text1: \"Order Completed\",\n            text2: \"\",\n          });\n          setTimeout(() => {\n            props.clearCart();\n            props.navigation.navigate(\"Cart\");\n          }, 500);\n        }\n      })\n      .catch((error) => {\n        Toast.show({\n          topOffset: 60,\n          type: \"error\",\n          text1: \"Something went wrong\",\n          text2: \"Please try again\",\n        });\n      });\n  };\n\n  return (\n    <ScrollView contentContainerStyle={styles.container}>\n      <View style={styles.titleContainer}>\n        <Text style={{ fontSize: 20, fontWeight: \"bold\" }}>Confirm Order</Text>\n        {props.route.params ? (\n          <View style={{ borderWidth: 1, borderColor: \"orange\" }}>\n            <Text style={styles.title}>Shipping to:</Text>\n            <View style={{ padding: 8 }}>\n              <Text>Address: {finalOrder.order.order.shippingAddress1}</Text>\n              <Text>Address2: {finalOrder.order.order.shippingAddress2}</Text>\n              <Text>City: {finalOrder.order.order.city}</Text>\n              <Text>Zip Code: {finalOrder.order.order.zip}</Text>\n              <Text>Country: {finalOrder.order.order.country}</Text>\n            </View>\n            <Text style={styles.title}>Items:</Text>\n            {/* CHANGE THIS */}\n            {productUpdate && (\n              <>\n                {productUpdate.map((x) => {\n                  return (\n                    <ListItem style={styles.listItem} key={x.name} avatar>\n                      <Left>\n                        <Thumbnail source={{ uri: x.image }} />\n                      </Left>\n                      <Body style={styles.body}>\n                        <Left>\n                          <Text>{x.name}</Text>\n                        </Left>\n                        <Right>\n                          <Text>$ {x.price}</Text>\n                        </Right>\n                      </Body>\n                    </ListItem>\n                  );\n                })}\n              </>\n            )}\n          </View>\n        ) : null}\n        <View style={{ alignItems: \"center\", margin: 20 }}>\n          <Button title={\"Place order\"} onPress={confirmOrder} />\n        </View>\n      </View>\n    </ScrollView>\n  );\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    clearCart: () => dispatch(actions.clearCart()),\n  };\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    height: height,\n    padding: 8,\n    alignContent: \"center\",\n    backgroundColor: \"white\",\n  },\n  titleContainer: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    margin: 8,\n  },\n  title: {\n    alignSelf: \"center\",\n    margin: 8,\n    fontSize: 16,\n    fontWeight: \"bold\",\n  },\n  listItem: {\n    alignItems: \"center\",\n    backgroundColor: \"white\",\n    justifyContent: \"center\",\n    width: width / 1.2,\n  },\n  body: {\n    margin: 10,\n    alignItems: \"center\",\n    flexDirection: \"row\",\n  },\n});\n\nexport default connect(null, mapDispatchToProps)(Confirm);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}