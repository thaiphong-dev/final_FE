{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useCallback}from\"react\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import FlatList from\"react-native-web/dist/exports/FlatList\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import Button from\"react-native-web/dist/exports/Button\";import{Header,Item,Input}from\"native-base\";import Icon from\"@expo/vector-icons/FontAwesome\";import{useFocusEffect}from\"@react-navigation/native\";import ListItem from\"./ListItem\";import axios from\"axios\";import baseURL from\"../../assets/common/baseUrl\";import AsyncStorage from\"@react-native-community/async-storage\";import EasyButton from\"../../Shared/StyledComponents/EasyButton\";var _Dimensions$get=Dimensions.get(\"window\"),height=_Dimensions$get.height,width=_Dimensions$get.width;var ListHeader=function ListHeader(){return React.createElement(View,{elevation:1,style:styles.listHeader},React.createElement(View,{style:styles.headerItem}),React.createElement(View,{style:styles.headerItem},React.createElement(Text,{style:{fontWeight:'600'}},\"Brand\")),React.createElement(View,{style:styles.headerItem},React.createElement(Text,{style:{fontWeight:'600'}},\"Name\")),React.createElement(View,{style:styles.headerItem},React.createElement(Text,{style:{fontWeight:'600'}},\"Category\")),React.createElement(View,{style:styles.headerItem},React.createElement(Text,{style:{fontWeight:'600'}},\"Price\")));};var Products=function Products(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),productList=_useState2[0],setProductList=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),productFilter=_useState4[0],setProductFilter=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),token=_useState8[0],setToken=_useState8[1];useFocusEffect(useCallback(function(){AsyncStorage.getItem(\"jwt\").then(function(res){setToken(res);}).catch(function(error){return console.log(error);});axios.get(baseURL+\"products\").then(function(res){setProductList(res.data);setProductFilter(res.data);setLoading(false);});return function(){setProductList();setProductFilter();setLoading(true);};},[]));var searchProduct=function searchProduct(text){if(text==\"\"){setProductFilter(productList);}setProductFilter(productList.filter(function(i){return i.name.toLowerCase().includes(text.toLowerCase());}));};var deleteProduct=function deleteProduct(id){axios.delete(baseURL+\"products/\"+id,{headers:{Authorization:\"Bearer \"+token}}).then(function(res){var products=productFilter.filter(function(item){return item.id!==id;});setProductFilter(products);}).catch(function(error){return console.log(error);});};return React.createElement(View,{style:styles.container},React.createElement(View,{style:styles.buttonContainer},React.createElement(EasyButton,{secondary:true,medium:true,onPress:function onPress(){return props.navigation.navigate(\"Orders\");}},React.createElement(Icon,{name:\"shopping-bag\",size:18,color:\"white\"}),React.createElement(Text,{style:styles.buttonText},\"Orders\")),React.createElement(EasyButton,{secondary:true,medium:true,onPress:function onPress(){return props.navigation.navigate(\"ProductForm\");}},React.createElement(Icon,{name:\"plus\",size:18,color:\"white\"}),React.createElement(Text,{style:styles.buttonText},\"Products\")),React.createElement(EasyButton,{secondary:true,medium:true,onPress:function onPress(){return props.navigation.navigate(\"Categories\");}},React.createElement(Icon,{name:\"plus\",size:18,color:\"white\"}),React.createElement(Text,{style:styles.buttonText},\"Categories\"))),React.createElement(View,null,React.createElement(Header,{searchBar:true,rounded:true},React.createElement(Item,{style:{padding:5}},React.createElement(Icon,{name:\"search\"}),React.createElement(Input,{placeholder:\"Search\",onChangeText:function onChangeText(text){return searchProduct(text);}})))),loading?React.createElement(View,{style:styles.spinner},React.createElement(ActivityIndicator,{size:\"large\",color:\"red\"})):React.createElement(FlatList,{data:productFilter,ListHeaderComponent:ListHeader,renderItem:function renderItem(_ref){var item=_ref.item,index=_ref.index;return React.createElement(ListItem,_extends({},item,{navigation:props.navigation,index:index,delete:deleteProduct}));},keyExtractor:function keyExtractor(item){return item.id;}}));};var styles=StyleSheet.create({listHeader:{flexDirection:'row',padding:5,backgroundColor:'gainsboro'},headerItem:{margin:3,width:width/6},spinner:{height:height/2,alignItems:'center',justifyContent:'center'},container:{marginBottom:160,backgroundColor:'white'},buttonContainer:{margin:20,alignSelf:'center',flexDirection:'row'},buttonText:{marginLeft:4,color:'white'}});export default Products;","map":{"version":3,"names":["React","useState","useCallback","Header","Item","Input","Icon","useFocusEffect","ListItem","axios","baseURL","AsyncStorage","EasyButton","Dimensions","get","height","width","ListHeader","styles","listHeader","headerItem","fontWeight","Products","props","productList","setProductList","productFilter","setProductFilter","loading","setLoading","token","setToken","getItem","then","res","catch","error","console","log","data","searchProduct","text","filter","i","name","toLowerCase","includes","deleteProduct","id","delete","headers","Authorization","products","item","container","buttonContainer","navigation","navigate","buttonText","padding","spinner","index","StyleSheet","create","flexDirection","backgroundColor","margin","alignItems","justifyContent","marginBottom","alignSelf","marginLeft","color"],"sources":["D:/PTIT/do an nam 4/mobile/mern-stack-ecommerce-master/easy-shop/Screens/Admin/Products.js"],"sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport {\n  View,\n  Text,\n  FlatList,\n  ActivityIndicator,\n  StyleSheet,\n  Dimensions,\n  Button\n} from \"react-native\";\nimport { Header, Item, Input } from \"native-base\"\nimport Icon from \"react-native-vector-icons/FontAwesome\"\nimport { useFocusEffect } from \"@react-navigation/native\"\nimport ListItem from \"./ListItem\"\n\nimport axios from \"axios\"\nimport baseURL from \"../../assets/common/baseUrl\"\nimport AsyncStorage from \"@react-native-community/async-storage\"\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\n\nvar { height, width } = Dimensions.get(\"window\")\n\nconst ListHeader = () => {\n    return(\n        <View\n            elevation={1}\n            style={styles.listHeader}\n        >\n            <View style={styles.headerItem}></View>\n            <View style={styles.headerItem}>\n                <Text style={{ fontWeight: '600'}}>Brand</Text>\n            </View>\n            <View style={styles.headerItem}>\n                <Text style={{ fontWeight: '600'}}>Name</Text>\n            </View>\n            <View style={styles.headerItem}>\n                <Text style={{ fontWeight: '600'}}>Category</Text>\n            </View>\n            <View style={styles.headerItem}>\n                <Text style={{ fontWeight: '600'}}>Price</Text>\n            </View>\n        </View>\n    )\n}\n\nconst Products = (props) => {\n\n    const [productList, setProductList] = useState();\n    const [productFilter, setProductFilter] = useState();\n    const [loading, setLoading] = useState(true);\n    const [token, setToken] = useState();\n\n    useFocusEffect(\n        useCallback(\n            () => {\n                // Get Token\n                AsyncStorage.getItem(\"jwt\")\n                    .then((res) => {\n                        setToken(res)\n                    })\n                    .catch((error) => console.log(error))\n\n                axios\n                    .get(`${baseURL}products`)\n                    .then((res) => {\n                        setProductList(res.data);\n                        setProductFilter(res.data);\n                        setLoading(false);\n                    })\n\n                return () => {\n                    setProductList();\n                    setProductFilter();\n                    setLoading(true);\n                }\n            },\n            [],\n        )\n    )\n\n    const searchProduct = (text) => {\n        if (text == \"\") {\n            setProductFilter(productList)\n        }\n        setProductFilter(\n            productList.filter((i) => \n                i.name.toLowerCase().includes(text.toLowerCase())\n            )\n        )\n    }\n\n    const deleteProduct = (id) => {\n        axios\n            .delete(`${baseURL}products/${id}`, {\n                headers: { Authorization: `Bearer ${token}` },\n            })\n            .then((res) => {\n                const products = productFilter.filter((item) => item.id !== id)\n                setProductFilter(products)\n            })\n            .catch((error) => console.log(error));\n    }\n\n  return (\n    <View style={styles.container}>\n        <View style={styles.buttonContainer}>\n            <EasyButton\n                secondary\n                medium\n                onPress={() => props.navigation.navigate(\"Orders\")}\n            >\n                <Icon name=\"shopping-bag\" size={18} color=\"white\" />\n                <Text style={styles.buttonText}>Orders</Text>\n            </EasyButton>\n            <EasyButton\n                secondary\n                medium\n                onPress={() => props.navigation.navigate(\"ProductForm\")}\n            >\n                <Icon name=\"plus\" size={18} color=\"white\" />\n                <Text style={styles.buttonText}>Products</Text>\n            </EasyButton>\n            <EasyButton\n                secondary\n                medium\n                onPress={() => props.navigation.navigate(\"Categories\")}\n            >\n                <Icon name=\"plus\" size={18} color=\"white\" />\n                <Text style={styles.buttonText}>Categories</Text>\n            </EasyButton>\n        </View>\n      <View>\n          <Header searchBar rounded>\n              <Item style={{ padding: 5 }}>\n                  <Icon name=\"search\" />\n                  <Input \n                    placeholder=\"Search\"\n                    onChangeText={(text) => searchProduct(text)}\n                  />\n              </Item>\n          </Header>\n      </View>\n\n      {loading ? (\n          <View style={styles.spinner}> \n              <ActivityIndicator size=\"large\" color=\"red\" />\n          </View>\n      ) : (\n          <FlatList \n            data={productFilter}\n            ListHeaderComponent={ListHeader}\n            renderItem={({ item, index }) => (\n                <ListItem \n                    {...item}\n                    navigation={props.navigation}\n                    index={index}\n                    delete={deleteProduct}\n                />\n            )}\n            keyExtractor={(item) => item.id}\n          />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n    listHeader: {\n        flexDirection: 'row',\n        padding: 5,\n        backgroundColor: 'gainsboro'\n    },\n    headerItem: {\n        margin: 3,\n        width: width / 6\n    },\n    spinner: {\n        height: height / 2,\n        alignItems: 'center',\n        justifyContent: 'center'\n    },\n    container: {\n        marginBottom: 160,\n        backgroundColor: 'white'\n    },\n    buttonContainer: {\n        margin: 20,\n        alignSelf: 'center',\n        flexDirection: 'row'\n    },\n    buttonText: {\n        marginLeft: 4,\n        color: 'white'\n    }\n})\n\nexport default Products;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}