{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import View from\"react-native-web/dist/exports/View\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{Container,Text,Left,Right,H1}from\"native-base\";import{SwipeListView}from'react-native-swipe-list-view';import CartItem from\"./CartItem\";import Icon from\"@expo/vector-icons/FontAwesome\";import EasyButton from\"../../Shared/StyledComponents/EasyButton\";import{connect}from\"react-redux\";import*as actions from\"../../Redux/Actions/cartActions\";import AuthGlobal from\"../../Context/store/AuthGlobal\";import axios from\"axios\";import baseURL from\"../../assets/common/baseUrl\";import AsyncStorage from\"@react-native-community/async-storage\";var _Dimensions$get=Dimensions.get(\"window\"),height=_Dimensions$get.height,width=_Dimensions$get.width;var Cart=function Cart(props){var context=useContext(AuthGlobal);var _useState=useState(),_useState2=_slicedToArray(_useState,2),productUpdate=_useState2[0],setProductUpdate=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),totalPrice=_useState4[0],setTotalPrice=_useState4[1];useEffect(function(){getProducts();return function(){setProductUpdate();setTotalPrice();};},[props]);var getProducts=function getProducts(){var products=[];props.cartItems.forEach(function(cart){axios.get(baseURL+\"products/\"+cart.product).then(function(data){products.push(data.data);setProductUpdate(products);var total=0;products.forEach(function(product){var price=total+=product.price;setTotalPrice(price);});}).catch(function(e){console.log(e);});});};return React.createElement(React.Fragment,null,productUpdate?React.createElement(Container,null,React.createElement(H1,{style:{alignSelf:\"center\"}},\"Cart\"),React.createElement(SwipeListView,{data:productUpdate,renderItem:function renderItem(data){return React.createElement(CartItem,{item:data});},renderHiddenItem:function renderHiddenItem(data){return React.createElement(View,{style:styles.hiddenContainer},React.createElement(TouchableOpacity,{style:styles.hiddenButton,onPress:function onPress(){return props.removeFromCart(data.item);}},React.createElement(Icon,{name:\"trash\",color:\"white\",size:30})));},disableRightSwipe:true,previewOpenDelay:3000,friction:1000,tension:40,leftOpenValue:75,stopLeftSwipe:75,rightOpenValue:-75}),React.createElement(View,{style:styles.bottomContainer},React.createElement(Left,null,React.createElement(Text,{style:styles.price},\"$ \",totalPrice)),React.createElement(Right,null,React.createElement(EasyButton,{danger:true,medium:true,onPress:function onPress(){return props.clearCart();}},React.createElement(Text,{style:{color:'white'}},\"Clear\"))),React.createElement(Right,null,context.stateUser.isAuthenticated?React.createElement(EasyButton,{primary:true,medium:true,onPress:function onPress(){return props.navigation.navigate('Checkout');}},React.createElement(Text,{style:{color:'white'}},\"Checkout\")):React.createElement(EasyButton,{secondary:true,medium:true,onPress:function onPress(){return props.navigation.navigate('Login');}},React.createElement(Text,{style:{color:'white'}},\"Login\"))))):React.createElement(Container,{style:styles.emptyContainer},React.createElement(Text,null,\"Looks like your cart is empty\"),React.createElement(Text,null,\"Add products to your cart to get started\")));};var mapStateToProps=function mapStateToProps(state){var cartItems=state.cartItems;return{cartItems:cartItems};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{clearCart:function clearCart(){return dispatch(actions.clearCart());},removeFromCart:function removeFromCart(item){return dispatch(actions.removeFromCart(item));}};};var styles=StyleSheet.create({emptyContainer:{height:height,alignItems:\"center\",justifyContent:\"center\"},bottomContainer:{flexDirection:'row',position:'absolute',bottom:0,left:0,backgroundColor:'white',elevation:20},price:{fontSize:18,margin:20,color:'red'},hiddenContainer:{flex:1,justifyContent:'flex-end',flexDirection:'row'},hiddenButton:{backgroundColor:'red',justifyContent:'center',alignItems:'flex-end',paddingRight:25,height:70,width:width/1.2}});export default connect(mapStateToProps,mapDispatchToProps)(Cart);","map":{"version":3,"names":["React","useContext","useEffect","useState","Container","Text","Left","Right","H1","SwipeListView","CartItem","Icon","EasyButton","connect","actions","AuthGlobal","axios","baseURL","AsyncStorage","Dimensions","get","height","width","Cart","props","context","productUpdate","setProductUpdate","totalPrice","setTotalPrice","getProducts","products","cartItems","forEach","cart","product","then","data","push","total","price","catch","e","console","log","alignSelf","styles","hiddenContainer","hiddenButton","removeFromCart","item","bottomContainer","clearCart","color","stateUser","isAuthenticated","navigation","navigate","emptyContainer","mapStateToProps","state","mapDispatchToProps","dispatch","StyleSheet","create","alignItems","justifyContent","flexDirection","position","bottom","left","backgroundColor","elevation","fontSize","margin","flex","paddingRight"],"sources":["D:/PTIT/do an nam 4/mobile/mern-stack-ecommerce-master/easy-shop/Screens/Cart/Cart.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport {\n  View,\n  Dimensions,\n  StyleSheet,\n  TouchableOpacity,\n} from \"react-native\";\nimport {\n  Container,\n  Text,\n  Left,\n  Right,\n  H1\n} from \"native-base\";\nimport { SwipeListView } from 'react-native-swipe-list-view'\nimport CartItem from './CartItem'\n\nimport Icon from \"react-native-vector-icons/FontAwesome\";\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\"\n\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../Redux/Actions/cartActions\";\nimport AuthGlobal from \"../../Context/store/AuthGlobal\"\nimport axios from \"axios\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport AsyncStorage from \"@react-native-community/async-storage\"\n\nvar { height, width } = Dimensions.get(\"window\");\n\nconst Cart = (props) => {\n\n  const context = useContext(AuthGlobal);\n\n  // Add this\n  const [productUpdate, setProductUpdate] = useState()\n  const [totalPrice, setTotalPrice] = useState()\n  useEffect(() => {\n    getProducts()\n    return () => {\n      setProductUpdate()\n      setTotalPrice()\n    }\n  }, [props])\n  \n    const getProducts = () => {\n      var products = [];\n      props.cartItems.forEach(cart => {\n        axios.get(`${baseURL}products/${cart.product}`).then(data => {\n          products.push(data.data)\n          setProductUpdate(products)\n          var total = 0;\n          products.forEach(product => {\n            const price = (total += product.price)\n              setTotalPrice(price)\n          });\n        })\n        .catch(e => {\n          console.log(e)\n        })\n      })\n    }\n\n  return (\n    <>\n      {productUpdate ? (\n        <Container>\n          <H1 style={{ alignSelf: \"center\" }}>Cart</H1>\n          <SwipeListView\n            data={productUpdate}\n            renderItem={(data) => (\n             <CartItem item={data} />\n            )}\n            renderHiddenItem={(data) => (\n              <View style={styles.hiddenContainer}>\n                <TouchableOpacity \n                style={styles.hiddenButton}\n                onPress={() => props.removeFromCart(data.item)}\n                >\n                  <Icon name=\"trash\" color={\"white\"} size={30} />\n                </TouchableOpacity>\n              </View>\n            )}\n            disableRightSwipe={true}\n            previewOpenDelay={3000}\n            friction={1000}\n            tension={40}\n            leftOpenValue={75}\n            stopLeftSwipe={75}\n            rightOpenValue={-75}\n          />\n          <View style={styles.bottomContainer}>\n            <Left>\n                <Text style={styles.price}>$ {totalPrice}</Text>\n            </Left>\n            <Right>\n                <EasyButton\n                  danger\n                  medium\n                  onPress={() => props.clearCart()}\n                >\n                  <Text style={{ color: 'white' }}>Clear</Text>\n                </EasyButton>\n            </Right>\n            <Right>\n              {context.stateUser.isAuthenticated ? (\n                <EasyButton\n                  primary\n                  medium\n                  onPress={() => props.navigation.navigate('Checkout')}\n                >\n                <Text style={{ color: 'white' }}>Checkout</Text>\n                </EasyButton>\n              ) : (\n                <EasyButton\n                  secondary\n                  medium\n                  onPress={() => props.navigation.navigate('Login')}\n                >\n                <Text style={{ color: 'white' }}>Login</Text>\n                </EasyButton>\n              )}\n                \n            </Right>\n          </View>\n        </Container>\n      ) : (\n        <Container style={styles.emptyContainer}>\n          <Text>Looks like your cart is empty</Text>\n          <Text>Add products to your cart to get started</Text>\n        </Container>\n      )}\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  const { cartItems } = state;\n  return {\n    cartItems: cartItems,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    clearCart: () => dispatch(actions.clearCart()),\n    removeFromCart: (item) => dispatch(actions.removeFromCart(item))\n    }\n}\n\nconst styles = StyleSheet.create({\n  emptyContainer: {\n    height: height,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  bottomContainer: {\n      flexDirection: 'row',\n      position: 'absolute',\n      bottom: 0,\n      left: 0,\n      backgroundColor: 'white',\n      elevation: 20\n  },\n  price: {\n      fontSize: 18,\n      margin: 20,\n      color: 'red'\n  },\n  hiddenContainer: {\n    flex: 1,\n    justifyContent: 'flex-end',\n    flexDirection: 'row'\n  },\n  hiddenButton: {\n    backgroundColor: 'red',\n    justifyContent: 'center',\n    alignItems: 'flex-end',\n    paddingRight: 25,\n    height: 70,\n    width: width / 1.2\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}