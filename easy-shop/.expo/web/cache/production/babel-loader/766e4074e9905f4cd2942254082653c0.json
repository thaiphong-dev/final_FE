{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useCallback}from\"react\";import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import FlatList from\"react-native-web/dist/exports/FlatList\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import{Container,Header,Icon,Item,Input,Text}from\"native-base\";import{useFocusEffect}from'@react-navigation/native';import baseUrl from\"../../assets/common/baseUrl\";import axios from'axios';import ProductList from\"./ProductList\";import SearchedProduct from\"./SearchedProducts\";import Banner from\"../../Shared/Banner\";import CategoryFilter from\"./CategoryFilter\";import baseURL from\"../../assets/common/baseUrl\";var _Dimensions$get=Dimensions.get('window'),height=_Dimensions$get.height;var ProductContainer=function ProductContainer(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productsFiltered=_useState4[0],setProductsFiltered=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),focus=_useState6[0],setFocus=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),productsCtg=_useState10[0],setProductsCtg=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),active=_useState12[0],setActive=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),initialState=_useState14[0],setInitialState=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),loading=_useState16[0],setLoading=_useState16[1];useFocusEffect(useCallback(function(){setFocus(false);setActive(-1);axios.get(baseURL+\"products\").then(function(res){setProducts(res.data);setProductsFiltered(res.data);setProductsCtg(res.data);setInitialState(res.data);setLoading(false);}).catch(function(error){console.log('Api call error');});axios.get(baseURL+\"categories\").then(function(res){setCategories(res.data);}).catch(function(error){console.log('Api call error');});return function(){setProducts([]);setProductsFiltered([]);setFocus();setCategories([]);setActive();setInitialState();};},[]));var searchProduct=function searchProduct(text){setProductsFiltered(products.filter(function(i){return i.name.toLowerCase().includes(text.toLowerCase());}));};var openList=function openList(){setFocus(true);};var onBlur=function onBlur(){setFocus(false);};var changeCtg=function changeCtg(ctg){{ctg===\"all\"?[setProductsCtg(initialState),setActive(true)]:[setProductsCtg(products.filter(function(i){return i.category._id===ctg;}),setActive(true))];}};return React.createElement(React.Fragment,null,loading==false?React.createElement(Container,null,React.createElement(Header,{searchBar:true,rounded:true},React.createElement(Item,null,React.createElement(Icon,{name:\"ios-search\"}),React.createElement(Input,{placeholder:\"Search\",onFocus:openList,onChangeText:function onChangeText(text){return searchProduct(text);}}),focus==true?React.createElement(Icon,{onPress:onBlur,name:\"ios-close\"}):null)),focus==true?React.createElement(SearchedProduct,{navigation:props.navigation,productsFiltered:productsFiltered}):React.createElement(ScrollView,null,React.createElement(View,null,React.createElement(View,null,React.createElement(Banner,null)),React.createElement(View,null,React.createElement(CategoryFilter,{categories:categories,categoryFilter:changeCtg,productsCtg:productsCtg,active:active,setActive:setActive})),productsCtg.length>0?React.createElement(View,{style:styles.listContainer},productsCtg.map(function(item){return React.createElement(ProductList,{navigation:props.navigation,key:item.name,item:item});})):React.createElement(View,{style:[styles.center,{height:height/2}]},React.createElement(Text,null,\"No products found\"))))):React.createElement(Container,{style:[styles.center,{backgroundColor:\"#f2f2f2\"}]},React.createElement(ActivityIndicator,{size:\"large\",color:\"red\"})));};var styles=StyleSheet.create({container:{flexWrap:\"wrap\",backgroundColor:\"gainsboro\"},listContainer:{height:height,flex:1,flexDirection:\"row\",alignItems:\"flex-start\",flexWrap:\"wrap\",backgroundColor:\"gainsboro\"},center:{justifyContent:'center',alignItems:'center'}});export default ProductContainer;","map":{"version":3,"names":["React","useState","useCallback","Container","Header","Icon","Item","Input","Text","useFocusEffect","baseUrl","axios","ProductList","SearchedProduct","Banner","CategoryFilter","baseURL","Dimensions","get","height","ProductContainer","props","products","setProducts","productsFiltered","setProductsFiltered","focus","setFocus","categories","setCategories","productsCtg","setProductsCtg","active","setActive","initialState","setInitialState","loading","setLoading","then","res","data","catch","error","console","log","searchProduct","text","filter","i","name","toLowerCase","includes","openList","onBlur","changeCtg","ctg","category","_id","navigation","length","styles","listContainer","map","item","center","backgroundColor","StyleSheet","create","container","flexWrap","flex","flexDirection","alignItems","justifyContent"],"sources":["D:/PTIT/do an nam 4/mobile/mern-stack-ecommerce-master/easy-shop/Screens/Products/ProductContainer.js"],"sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  ActivityIndicator,\n  FlatList,\n  ScrollView,\n  Dimensions\n} from \"react-native\";\nimport { Container, Header, Icon, Item, Input, Text } from \"native-base\";\nimport { useFocusEffect } from '@react-navigation/native'\nimport baseUrl from \"../../assets/common/baseUrl\"\nimport axios from 'axios';\n\nimport ProductList from \"./ProductList\";\nimport SearchedProduct from \"./SearchedProducts\";\nimport Banner from \"../../Shared/Banner\";\nimport CategoryFilter from \"./CategoryFilter\";\nimport baseURL from \"../../assets/common/baseUrl\";\n\nvar { height } = Dimensions.get('window')\n\nconst ProductContainer = (props) => {\n  const [products, setProducts] = useState([]);\n  const [productsFiltered, setProductsFiltered] = useState([]);\n  const [focus, setFocus] = useState();\n  const [categories, setCategories] = useState([]);\n  const [productsCtg, setProductsCtg] = useState([]);\n  const [active, setActive] = useState();\n  const [initialState, setInitialState] = useState([]);\n  const [loading, setLoading] = useState(true)\n\n  useFocusEffect((\n    useCallback(\n      () => {\n        setFocus(false);\n        setActive(-1);\n        \n        // Products\n        axios\n          .get(`${baseURL}products`)\n          .then((res) => {\n            setProducts(res.data);\n            setProductsFiltered(res.data);\n            setProductsCtg(res.data);\n            setInitialState(res.data);\n            setLoading(false)\n          })\n          .catch((error) => {\n            console.log('Api call error')\n          })\n    \n        // Categories\n        axios\n          .get(`${baseURL}categories`)\n          .then((res) => {\n            setCategories(res.data)\n          })\n          .catch((error) => {\n            console.log('Api call error')\n          })\n    \n        return () => {\n          setProducts([]);\n          setProductsFiltered([]);\n          setFocus();\n          setCategories([]);\n          setActive();\n          setInitialState();\n        };\n      },\n      [],\n    )\n  ))\n    \n   \n  \n\n  // Product Methods\n  const searchProduct = (text) => {\n    setProductsFiltered(\n      products.filter((i) => i.name.toLowerCase().includes(text.toLowerCase()))\n    );\n  };\n\n  const openList = () => {\n    setFocus(true);\n  };\n\n  const onBlur = () => {\n    setFocus(false);\n  };\n\n  // Categories\n  const changeCtg = (ctg) => {\n    {\n      ctg === \"all\"\n        ? [setProductsCtg(initialState), setActive(true)]\n        : [\n            setProductsCtg(\n              products.filter((i) => i.category._id === ctg),\n              setActive(true)\n            ),\n          ];\n    }\n  };\n\n  return (\n    <>\n    {loading == false ? (\n <Container>\n <Header searchBar rounded>\n   <Item>\n     <Icon name=\"ios-search\" />\n     <Input\n       placeholder=\"Search\"\n       onFocus={openList}\n       onChangeText={(text) => searchProduct(text)}\n     />\n     {focus == true ? <Icon onPress={onBlur} name=\"ios-close\" /> : null}\n   </Item>\n </Header>\n {focus == true ? (\n   <SearchedProduct \n   navigation={props.navigation}\n   productsFiltered={productsFiltered} />\n ) : (\n   <ScrollView>\n     <View>\n       <View>\n         <Banner />\n       </View>\n       <View>\n         <CategoryFilter\n           categories={categories}\n           categoryFilter={changeCtg}\n           productsCtg={productsCtg}\n           active={active}\n           setActive={setActive}\n         />\n       </View>\n       {productsCtg.length > 0 ? (\n       <View style={styles.listContainer}>\n           {productsCtg.map((item) => {\n               return(\n                   <ProductList\n                       navigation={props.navigation}\n                       key={item.name}\n                       item={item}\n                   />\n               )\n           })}\n       </View>\n       ) : (\n           <View style={[styles.center, { height: height / 2}]}>\n               <Text>No products found</Text>\n           </View>\n       )}\n      \n     </View>\n   </ScrollView>\n )}\n</Container>\n    ) : (\n      // Loading\n      <Container style={[styles.center, { backgroundColor: \"#f2f2f2\" }]}>\n        <ActivityIndicator size=\"large\" color=\"red\" />\n      </Container>\n    )}\n   </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\",\n  },\n  listContainer: {\n    height: height,\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\",\n  },\n  center: {\n      justifyContent: 'center',\n      alignItems: 'center'\n  }\n});\n\nexport default ProductContainer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}