{"ast":null,"code":"import jwt_decode from\"jwt-decode\";import AsyncStorage from\"@react-native-community/async-storage\";import Toast from\"react-native-toast-message\";import baseURL from\"../../assets/common/baseUrl\";export var SET_CURRENT_USER=\"SET_CURRENT_USER\";export var loginUser=function loginUser(user,dispatch){fetch(baseURL+\"users/login\",{method:\"POST\",body:JSON.stringify(user),headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){if(data){var token=data.token;AsyncStorage.setItem(\"jwt\",token);var decoded=jwt_decode(token);dispatch(setCurrentUser(decoded,user));}else{logoutUser(dispatch);}}).catch(function(err){Toast.show({topOffset:60,type:\"error\",text1:\"Please provide correct credentials\",text2:\"\"});logoutUser(dispatch);});};export var getUserProfile=function getUserProfile(id){fetch(baseURL+\"users/\"+id,{method:\"GET\",body:JSON.stringify(user),headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){return console.log(data);});};export var logoutUser=function logoutUser(dispatch){AsyncStorage.removeItem(\"jwt\");dispatch(setCurrentUser({}));};export var setCurrentUser=function setCurrentUser(decoded,user){return{type:SET_CURRENT_USER,payload:decoded,userProfile:user};};","map":{"version":3,"names":["jwt_decode","AsyncStorage","Toast","baseURL","SET_CURRENT_USER","loginUser","user","dispatch","fetch","method","body","JSON","stringify","headers","Accept","then","res","json","data","token","setItem","decoded","setCurrentUser","logoutUser","catch","err","show","topOffset","type","text1","text2","getUserProfile","id","console","log","removeItem","payload","userProfile"],"sources":["D:/PTIT/do an nam 4/mobile/mern-stack-ecommerce-master/easy-shop/Context/actions/Auth.actions.js"],"sourcesContent":["import jwt_decode from \"jwt-decode\"\nimport AsyncStorage from \"@react-native-community/async-storage\"\nimport Toast from \"react-native-toast-message\"\nimport baseURL from \"../../assets/common/baseUrl\"\n\nexport const SET_CURRENT_USER = \"SET_CURRENT_USER\";\n\nexport const loginUser = (user, dispatch) => {\n    fetch(`${baseURL}users/login`, {\n        method: \"POST\",\n        body: JSON.stringify(user),\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n        },\n    })\n    .then((res) => res.json())\n    .then((data) => {\n        if (data) {\n            const token = data.token;\n            AsyncStorage.setItem(\"jwt\", token)\n            const decoded = jwt_decode(token)\n            dispatch(setCurrentUser(decoded, user))\n        } else {\n           logoutUser(dispatch)\n        }\n    })\n    .catch((err) => {\n        Toast.show({\n            topOffset: 60,\n            type: \"error\",\n            text1: \"Please provide correct credentials\",\n            text2: \"\"\n        });\n        logoutUser(dispatch)\n    });\n};\n\nexport const getUserProfile = (id) => {\n    fetch(`${baseURL}users/${id}`, {\n        method: \"GET\",\n        body: JSON.stringify(user),\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\"\n        },\n    })\n    .then((res) => res.json())\n    .then((data) => console.log(data));\n}\n\nexport const logoutUser = (dispatch) => {\n    AsyncStorage.removeItem(\"jwt\");\n    dispatch(setCurrentUser({}))\n}\n\nexport const setCurrentUser = (decoded, user) => {\n    return {\n        type: SET_CURRENT_USER,\n        payload: decoded,\n        userProfile: user\n    }\n}"],"mappings":"AAAA,MAAOA,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uCAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,4BAAlB,CACA,MAAOC,CAAAA,OAAP,mCAEA,MAAO,IAAMC,CAAAA,gBAAgB,CAAG,kBAAzB,CAEP,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,IAAD,CAAOC,QAAP,CAAoB,CACzCC,KAAK,CAAIL,OAAJ,eAA0B,CAC3BM,MAAM,CAAE,MADmB,CAE3BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf,CAFqB,CAG3BO,OAAO,CAAE,CACLC,MAAM,CAAE,kBADH,CAEL,eAAgB,kBAFX,CAHkB,CAA1B,CAAL,CAQCC,IARD,CAQM,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EARN,EASCF,IATD,CASM,SAACG,IAAD,CAAU,CACZ,GAAIA,IAAJ,CAAU,CACN,GAAMC,CAAAA,KAAK,CAAGD,IAAI,CAACC,KAAnB,CACAlB,YAAY,CAACmB,OAAb,CAAqB,KAArB,CAA4BD,KAA5B,EACA,GAAME,CAAAA,OAAO,CAAGrB,UAAU,CAACmB,KAAD,CAA1B,CACAZ,QAAQ,CAACe,cAAc,CAACD,OAAD,CAAUf,IAAV,CAAf,CAAR,CACH,CALD,IAKO,CACJiB,UAAU,CAAChB,QAAD,CAAV,CACF,CACJ,CAlBD,EAmBCiB,KAnBD,CAmBO,SAACC,GAAD,CAAS,CACZvB,KAAK,CAACwB,IAAN,CAAW,CACPC,SAAS,CAAE,EADJ,CAEPC,IAAI,CAAE,OAFC,CAGPC,KAAK,CAAE,oCAHA,CAIPC,KAAK,CAAE,EAJA,CAAX,EAMAP,UAAU,CAAChB,QAAD,CAAV,CACH,CA3BD,EA4BH,CA7BM,CA+BP,MAAO,IAAMwB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,EAAD,CAAQ,CAClCxB,KAAK,CAAIL,OAAJ,UAAoB6B,EAApB,CAA0B,CAC3BvB,MAAM,CAAE,KADmB,CAE3BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf,CAFqB,CAG3BO,OAAO,CAAE,CACLC,MAAM,CAAE,kBADH,CAEL,eAAgB,kBAFX,CAHkB,CAA1B,CAAL,CAQCC,IARD,CAQM,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EARN,EASCF,IATD,CASM,SAACG,IAAD,QAAUe,CAAAA,OAAO,CAACC,GAAR,CAAYhB,IAAZ,CAAV,EATN,EAUH,CAXM,CAaP,MAAO,IAAMK,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAChB,QAAD,CAAc,CACpCN,YAAY,CAACkC,UAAb,CAAwB,KAAxB,EACA5B,QAAQ,CAACe,cAAc,CAAC,EAAD,CAAf,CAAR,CACH,CAHM,CAKP,MAAO,IAAMA,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACD,OAAD,CAAUf,IAAV,CAAmB,CAC7C,MAAO,CACHsB,IAAI,CAAExB,gBADH,CAEHgC,OAAO,CAAEf,OAFN,CAGHgB,WAAW,CAAE/B,IAHV,CAAP,CAKH,CANM"},"metadata":{},"sourceType":"module"}