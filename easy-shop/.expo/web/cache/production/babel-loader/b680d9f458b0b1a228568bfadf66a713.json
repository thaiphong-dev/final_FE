{"ast":null,"code":"import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import React from'react';import View from\"react-native-web/dist/exports/View\";import findNodeHandle from\"react-native-web/dist/exports/findNodeHandle\";import ReanimatedModule from\"./ReanimatedModule\";var TransitioningContext=React.createContext();function configFromProps(type,props){var config={type:type};if('durationMs'in props){config.durationMs=props.durationMs;}if('interpolation'in props){config.interpolation=props.interpolation;}if('type'in props){config.animation=props.type;}if('delayMs'in props){config.delayMs=props.delayMs;}if('propagation'in props){config.propagation=props.propagation;}return config;}function wrapTransitioningContext(Comp){return function(props){return React.createElement(TransitioningContext.Consumer,null,function(context){return React.createElement(Comp,_extends({context:context},props));});};}var In=function(_React$Component){_inherits(In,_React$Component);var _super=_createSuper(In);function In(){_classCallCheck(this,In);return _super.apply(this,arguments);}_createClass(In,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.context.push(configFromProps('in',this.props));}},{key:\"render\",value:function render(){return this.props.children||null;}}]);return In;}(React.Component);var Change=function(_React$Component2){_inherits(Change,_React$Component2);var _super2=_createSuper(Change);function Change(){_classCallCheck(this,Change);return _super2.apply(this,arguments);}_createClass(Change,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.context.push(configFromProps('change',this.props));}},{key:\"render\",value:function render(){return this.props.children||null;}}]);return Change;}(React.Component);var Out=function(_React$Component3){_inherits(Out,_React$Component3);var _super3=_createSuper(Out);function Out(){_classCallCheck(this,Out);return _super3.apply(this,arguments);}_createClass(Out,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.context.push(configFromProps('out',this.props));}},{key:\"render\",value:function render(){return this.props.children||null;}}]);return Out;}(React.Component);var Together=function(_React$Component4){_inherits(Together,_React$Component4);var _super4=_createSuper(Together);function Together(){var _this;_classCallCheck(this,Together);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super4.call.apply(_super4,[this].concat(args));_defineProperty(_assertThisInitialized(_this),\"transitions\",[]);return _this;}_createClass(Together,[{key:\"componentDidMount\",value:function componentDidMount(){var config=configFromProps('group',this.props);config.transitions=this.transitions;this.props.context.push(config);}},{key:\"render\",value:function render(){return React.createElement(TransitioningContext.Provider,{value:this.transitions},this.props.children);}}]);return Together;}(React.Component);var Sequence=function(_React$Component5){_inherits(Sequence,_React$Component5);var _super5=_createSuper(Sequence);function Sequence(){var _this2;_classCallCheck(this,Sequence);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super5.call.apply(_super5,[this].concat(args));_defineProperty(_assertThisInitialized(_this2),\"transitions\",[]);return _this2;}_createClass(Sequence,[{key:\"componentDidMount\",value:function componentDidMount(){var config=configFromProps('group',this.props);config.sequence=true;config.transitions=this.transitions;this.props.context.push(config);}},{key:\"render\",value:function render(){return React.createElement(TransitioningContext.Provider,{value:this.transitions},this.props.children);}}]);return Sequence;}(React.Component);function createTransitioningComponent(Component){var Wrapped=function(_React$Component6){_inherits(Wrapped,_React$Component6);var _super6=_createSuper(Wrapped);function Wrapped(){var _this3;_classCallCheck(this,Wrapped);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this3=_super6.call.apply(_super6,[this].concat(args));_defineProperty(_assertThisInitialized(_this3),\"propTypes\",Component.propTypes);_defineProperty(_assertThisInitialized(_this3),\"transitions\",[]);_defineProperty(_assertThisInitialized(_this3),\"viewRef\",React.createRef());return _this3;}_createClass(Wrapped,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.animateMount){this.animateNextTransition();}}},{key:\"setNativeProps\",value:function setNativeProps(props){this.viewRef.current.setNativeProps(props);}},{key:\"animateNextTransition\",value:function animateNextTransition(){var viewTag=findNodeHandle(this.viewRef.current);ReanimatedModule.animateNextTransition(viewTag,{transitions:this.transitions});}},{key:\"render\",value:function render(){var _this$props=this.props,transition=_this$props.transition,rest=_objectWithoutProperties(_this$props,[\"transition\"]);return React.createElement(React.Fragment,null,React.createElement(TransitioningContext.Provider,{value:this.transitions},transition),React.createElement(Component,_extends({},rest,{ref:this.viewRef,collapsable:false})));}}]);return Wrapped;}(React.Component);return Wrapped;}var Transitioning={View:createTransitioningComponent(View)};var Transition={Sequence:wrapTransitioningContext(Sequence),Together:wrapTransitioningContext(Together),In:wrapTransitioningContext(In),Out:wrapTransitioningContext(Out),Change:wrapTransitioningContext(Change)};export{Transitioning,Transition,createTransitioningComponent};","map":{"version":3,"sources":["Transitioning.js"],"names":["TransitioningContext","React","config","type","props","context","componentDidMount","configFromProps","render","transitions","Component","setNativeProps","animateNextTransition","viewTag","findNodeHandle","ReanimatedModule","transition","Transitioning","View","createTransitioningComponent","Transition","Sequence","wrapTransitioningContext","Together","In","Out","Change"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { View, findNodeHandle } from 'react-native';\nimport ReanimatedModule from './ReanimatedModule';\n\nconst TransitioningContext = React.createContext();\n\nfunction configFromProps(type, props) {\n  const config = { type };\n  if ('durationMs' in props) {\n    config.durationMs = props.durationMs;\n  }\n  if ('interpolation' in props) {\n    config.interpolation = props.interpolation;\n  }\n  if ('type' in props) {\n    config.animation = props.type;\n  }\n  if ('delayMs' in props) {\n    config.delayMs = props.delayMs;\n  }\n  if ('propagation' in props) {\n    config.propagation = props.propagation;\n  }\n  return config;\n}\n\n/**\n * The below wrapper is used to support legacy context API with Context.Consumer\n * render prop. We need it as we want to access `context` from within\n * `componentDidMount` callback. If we decided to drop support for older\n * react native we could rewrite it using hooks or `static contextType` API.\n */\nfunction wrapTransitioningContext(Comp) {\n  return props => {\n    return (\n      <TransitioningContext.Consumer>\n        {context => <Comp context={context} {...props} />}\n      </TransitioningContext.Consumer>\n    );\n  };\n}\n\nclass In extends React.Component {\n  componentDidMount() {\n    this.props.context.push(configFromProps('in', this.props));\n  }\n\n  render() {\n    return this.props.children || null;\n  }\n}\n\nclass Change extends React.Component {\n  componentDidMount() {\n    this.props.context.push(configFromProps('change', this.props));\n  }\n\n  render() {\n    return this.props.children || null;\n  }\n}\n\nclass Out extends React.Component {\n  componentDidMount() {\n    this.props.context.push(configFromProps('out', this.props));\n  }\n\n  render() {\n    return this.props.children || null;\n  }\n}\n\nclass Together extends React.Component {\n  transitions = [];\n  componentDidMount() {\n    const config = configFromProps('group', this.props);\n    config.transitions = this.transitions;\n    this.props.context.push(config);\n  }\n\n  render() {\n    return (\n      <TransitioningContext.Provider value={this.transitions}>\n        {this.props.children}\n      </TransitioningContext.Provider>\n    );\n  }\n}\n\nclass Sequence extends React.Component {\n  transitions = [];\n  componentDidMount() {\n    const config = configFromProps('group', this.props);\n    config.sequence = true;\n    config.transitions = this.transitions;\n    this.props.context.push(config);\n  }\n\n  render() {\n    return (\n      <TransitioningContext.Provider value={this.transitions}>\n        {this.props.children}\n      </TransitioningContext.Provider>\n    );\n  }\n}\n\nfunction createTransitioningComponent(Component) {\n  class Wrapped extends React.Component {\n    propTypes = Component.propTypes;\n    transitions = [];\n    viewRef = React.createRef();\n\n    componentDidMount() {\n      if (this.props.animateMount) {\n        this.animateNextTransition();\n      }\n    }\n\n    setNativeProps(props) {\n      this.viewRef.current.setNativeProps(props);\n    }\n\n    animateNextTransition() {\n      const viewTag = findNodeHandle(this.viewRef.current);\n      ReanimatedModule.animateNextTransition(viewTag, {\n        transitions: this.transitions,\n      });\n    }\n\n    render() {\n      const { transition, ...rest } = this.props;\n      return (\n        <React.Fragment>\n          <TransitioningContext.Provider value={this.transitions}>\n            {transition}\n          </TransitioningContext.Provider>\n          <Component {...rest} ref={this.viewRef} collapsable={false} />\n        </React.Fragment>\n      );\n    }\n  }\n  return Wrapped;\n}\n\nconst Transitioning = {\n  View: createTransitioningComponent(View),\n};\n\nconst Transition = {\n  Sequence: wrapTransitioningContext(Sequence),\n  Together: wrapTransitioningContext(Together),\n  In: wrapTransitioningContext(In),\n  Out: wrapTransitioningContext(Out),\n  Change: wrapTransitioningContext(Change),\n};\n\nexport { Transitioning, Transition, createTransitioningComponent };\n"]},"metadata":{},"sourceType":"module"}