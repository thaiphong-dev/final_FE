{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useReducer,userEffect,useState}from\"react\";import jwt_decode from\"jwt-decode\";import AsyncStorage from\"@react-native-community/async-storage\";import authReducer from\"../reducers/Auth.reducer\";import{setCurrentUser}from\"../actions/Auth.actions\";import AuthGlobal from\"./AuthGlobal\";var Auth=function Auth(props){var _useReducer=useReducer(authReducer,{isAuthenticated:null,user:{}}),_useReducer2=_slicedToArray(_useReducer,2),stateUser=_useReducer2[0],dispatch=_useReducer2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showChild=_useState2[0],setShowChild=_useState2[1];useEffect(function(){setShowChild(true);if(AsyncStorage.jwt){var decoded=AsyncStorage.jwt?AsyncStorage.jwt:\"\";if(setShowChild){dispatch(setCurrentUserUser(jwt_decode(decoded)));}}return function(){return setShowChild(false);};},[]);if(!showChild){return null;}else{return React.createElement(AuthGlobal.Provider,{value:{stateUser:stateUser,dispatch:dispatch}},props.children);}};export default Auth;","map":{"version":3,"names":["React","useEffect","useReducer","userEffect","useState","jwt_decode","AsyncStorage","authReducer","setCurrentUser","AuthGlobal","Auth","props","isAuthenticated","user","stateUser","dispatch","showChild","setShowChild","jwt","decoded","setCurrentUserUser","children"],"sources":["D:/PTIT/do an nam 4/mobile/mern-stack-ecommerce-master/easy-shop/Context/store/Auth.js"],"sourcesContent":["import React, { useEffect, useReducer, userEffect, useState } from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport AsyncStorage from \"@react-native-community/async-storage\"\n\nimport authReducer from \"../reducers/Auth.reducer\";\nimport { setCurrentUser } from \"../actions/Auth.actions\";\nimport AuthGlobal from './AuthGlobal'\n\nconst Auth = props => {\n    const [stateUser, dispatch] = useReducer(authReducer, {\n        isAuthenticated: null,\n        user: {}\n    });\n    const [showChild, setShowChild] = useState(false);\n\n    useEffect(() => {\n        setShowChild(true);\n        if (AsyncStorage.jwt) {\n            const decoded = AsyncStorage.jwt ? AsyncStorage.jwt : \"\";\n            if (setShowChild) {\n                dispatch(setCurrentUserUser(jwt_decode(decoded)))\n            }\n        }\n        return () => setShowChild(false);\n    }, [])\n\n\n    if (!showChild) {\n        return null;\n    } else {\n        return (\n            <AuthGlobal.Provider\n                value={{\n                    stateUser,\n                    dispatch\n                }}\n            >\n                {props.children}\n            </AuthGlobal.Provider>\n        )\n    }\n};\n\nexport default Auth;"],"mappings":"iEAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,UAA3B,CAAuCC,UAAvC,CAAmDC,QAAnD,KAAmE,OAAnE,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uCAAzB,CAEA,MAAOC,CAAAA,WAAP,gCACA,OAASC,cAAT,+BACA,MAAOC,CAAAA,UAAP,oBAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAAAC,KAAK,CAAI,CAClB,gBAA8BT,UAAU,CAACK,WAAD,CAAc,CAClDK,eAAe,CAAE,IADiC,CAElDC,IAAI,CAAE,EAF4C,CAAd,CAAxC,4CAAOC,SAAP,iBAAkBC,QAAlB,iBAIA,cAAkCX,QAAQ,CAAC,KAAD,CAA1C,wCAAOY,SAAP,eAAkBC,YAAlB,eAEAhB,SAAS,CAAC,UAAM,CACZgB,YAAY,CAAC,IAAD,CAAZ,CACA,GAAIX,YAAY,CAACY,GAAjB,CAAsB,CAClB,GAAMC,CAAAA,OAAO,CAAGb,YAAY,CAACY,GAAb,CAAmBZ,YAAY,CAACY,GAAhC,CAAsC,EAAtD,CACA,GAAID,YAAJ,CAAkB,CACdF,QAAQ,CAACK,kBAAkB,CAACf,UAAU,CAACc,OAAD,CAAX,CAAnB,CAAR,CACH,CACJ,CACD,MAAO,kBAAMF,CAAAA,YAAY,CAAC,KAAD,CAAlB,EAAP,CACH,CATQ,CASN,EATM,CAAT,CAYA,GAAI,CAACD,SAAL,CAAgB,CACZ,MAAO,KAAP,CACH,CAFD,IAEO,CACH,MACI,qBAAC,UAAD,CAAY,QAAZ,EACI,KAAK,CAAE,CACHF,SAAS,CAATA,SADG,CAEHC,QAAQ,CAARA,QAFG,CADX,EAMKJ,KAAK,CAACU,QANX,CADJ,CAUH,CACJ,CAjCD,CAmCA,cAAeX,CAAAA,IAAf"},"metadata":{},"sourceType":"module"}